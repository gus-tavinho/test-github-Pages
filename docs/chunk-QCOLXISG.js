import{A as R,B as Xe,C as Ye,D as Ze,E as et,F as tt,G as it,H as rt,I as ot,J as nt,K as at,L as T,M as mt,N as st,O as oe,P as lt,Q as pt,R as ct,S as dt,T as ut,U as ft,V as ht,W as gt,a as Q,b as M,c as Ve,d as W,e as X,f as j,g as Y,h as Z,i as Ae,j as Re,k as y,l as $e,m as Ue,n as qe,o as Ge,p as ze,q as Je,r as ee,s as Ke,t as Qe,u as V,v as te,w as A,x as ie,y as We,z as re}from"./chunk-AAGZUMPA.js";import{a as Ne,g as J,h as Le,i as P,j as K,k as fe,l as Be,m as je}from"./chunk-IKOOFK3O.js";import"./chunk-JGYM447R.js";import{$ as q,A as pe,Ac as E,Bb as k,Bc as B,C as ce,Cc as He,E as de,Eb as f,Ec as Pe,Fc as z,Gb as b,Gc as Te,Hc as Oe,Ic as De,Nb as H,Ob as a,Pb as u,Qb as g,T as N,Ta as L,Tb as we,Ub as ue,Vb as I,Wa as m,Wb as x,Xa as d,Xb as Fe,Yb as ke,_ as Se,da as be,j as Ce,ja as C,ka as G,ma as Ie,mb as v,n as le,ob as p,r as _e,sa as _,ta as S,tb as xe,ub as ye,vb as Ee,wb as Me,xb as o,yb as r,zb as c}from"./chunk-ZI5TOIKD.js";var O=(()=>{let e=class e{constructor(i){this.httpClient=i,this.baseUrl=Be.baseUrl}getHeroes(){return this.httpClient.get(`${this.baseUrl}/heroes`)}getHeroById(i){return this.httpClient.get(`${this.baseUrl}/heroes/${i}`).pipe(ce(n=>le(void 0)))}getSuggestions(i){return this.httpClient.get(`${this.baseUrl}/heroes?q=${i}&_limit=6`)}addHero(i){return this.httpClient.post(`${this.baseUrl}/heroes`,i)}updateHero(i){if(!i.id)throw Error("Hero id is required");return this.httpClient.patch(`${this.baseUrl}/heroes/${i.id}`,i)}deleteHeroById(i){return this.httpClient.delete(`${this.baseUrl}/heroes/${i}`).pipe(_e(n=>!0),ce(n=>le(!1)))}};e.\u0275fac=function(n){return new(n||e)(be(Ne))},e.\u0275prov=Se({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $=(()=>{let e=class e{transform(i){return!i.id&&!i.alt_img?"assets/no-image.png":i.alt_img?i.alt_img:`assets/heroes/${i.id}.jpg`}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=Ie({name:"heroImage",type:e,pure:!0});let t=e;return t})();function wt(t,e){t&1&&(o(0,"mat-grid-list",2)(1,"mat-grid-tile"),c(2,"mat-spinner"),r()())}function Ft(t,e){if(t&1){let l=k();o(0,"div",3)(1,"mat-card",4)(2,"mat-card-header")(3,"mat-card-title"),a(4),r(),o(5,"mat-card-subtitle"),a(6),r()(),c(7,"img",5),I(8,"heroImage"),r(),o(9,"mat-card",4)(10,"mat-card-title"),a(11,"Informaci\xF3n"),r(),o(12,"mat-card-subtitle"),a(13),r(),o(14,"mat-card-content")(15,"mat-list")(16,"mat-list-item"),a(17),r(),o(18,"mat-list-item"),a(19),r(),o(20,"mat-list-item"),a(21),r(),o(22,"mat-list-item"),a(23),r()(),o(24,"button",6),f("click",function(){_(l);let n=b();return S(n.goBack())}),a(25," Regresar "),r()()()()}if(t&2){let l=b();m(4),u(l.hero.alter_ego),m(2),u(l.hero.superhero),m(),p("src",x(8,9,l.hero),L)("alt",l.hero.superhero),m(6),u(l.hero.superhero),m(4),u(l.hero.first_appearance),m(2),u(l.hero.characters),m(2),u(l.hero.publisher),m(2),u(l.hero.alter_ego)}}var Ct=(()=>{let e=class e{constructor(i,n,s){this.activatedRoute=i,this.router=n,this.heroesService=s}ngOnInit(){this.activatedRoute.params.pipe(N(({id:i})=>this.heroesService.getHeroById(i))).subscribe(i=>{if(!i){this.router.navigate(["/heroes/list"]);return}this.hero=i})}goBack(){this.router.navigateByUrl("heroes/list")}};e.\u0275fac=function(n){return new(n||e)(d(J),d(P),d(O))},e.\u0275cmp=C({type:e,selectors:[["app-heroe-page"]],decls:3,vars:2,consts:[["divLoading",""],["class","grid p-2",4,"ngIf","ngIfElse"],["cols","1","rowHeight","500px"],[1,"grid","p-2"],[1,"col-12","sm:col-6"],["mat-card-image","",3,"src","alt"],["mat-button","","color","warn",3,"click"]],template:function(n,s){if(n&1&&v(0,wt,3,0,"ng-template",null,0,ke)(2,Ft,26,11,"div",1),n&2){let h=H(1);m(2),p("ngIf",s.hero)("ngIfElse",h)}},dependencies:[B,M,V,A,re,R,ie,te,at,nt,st,oe,pt,$]});let t=e;return t})();var kt=()=>({width:"250px"});function Ht(t,e){if(t&1){let l=k();o(0,"mat-list-item",9),f("click",function(){_(l),b();let n=H(2);return S(n.toggle())}),o(1,"mat-icon",10),a(2),r(),a(3),r()}if(t&2){let l=e.$implicit;p("routerLink",l.url),m(2),u(l.icon),m(),g(" ",l.label," ")}}var St=(()=>{let e=class e{constructor(i,n){this.authService=i,this.router=n,this.sidebarItems=[{label:"Listado",icon:"label",url:"./list"},{label:"A\xF1adir",icon:"add",url:"./new-hero"},{label:"Buscar",icon:"search",url:"./search"}]}get user(){return this.authService.currentUser}onLogout(){this.authService.logout(),this.router.navigate(["/auth/login"])}};e.\u0275fac=function(n){return new(n||e)(d(je),d(P))},e.\u0275cmp=C({type:e,selectors:[["app-layout-page"]],decls:24,vars:4,consts:[["sidenav",""],["fullscreen",""],["mode","push",3,"ngStyle"],[1,"spacer"],["mat-icon-button","",3,"click"],[3,"routerLink","click",4,"ngFor","ngForOf"],["color","primary"],["mat-button","",3,"click"],[1,"container","p-2"],[3,"click","routerLink"],["matListItemIcon",""]],template:function(n,s){if(n&1){let h=k();o(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0)(3,"mat-toolbar")(4,"span"),a(5,"Men\xFA"),r(),c(6,"span",3),o(7,"button",4),f("click",function(){_(h);let D=H(2);return S(D.toggle())}),o(8,"mat-icon"),a(9,"menu"),r()()(),o(10,"mat-nav-list"),v(11,Ht,4,3,"mat-list-item",5),c(12,"mat-divider"),r()(),o(13,"mat-toolbar",6)(14,"button",4),f("click",function(){_(h);let D=H(2);return S(D.toggle())}),o(15,"mat-icon"),a(16,"menu"),r()(),c(17,"span",3),o(18,"span"),a(19),r(),o(20,"button",7),f("click",function(){return _(h),S(s.onLogout())}),a(21," Logout "),r()(),o(22,"div",8),c(23,"router-outlet"),r()()}n&2&&(m(),p("ngStyle",we(3,kt)),m(10),p("ngForOf",s.sidebarItems),m(8),u(s.user==null?null:s.user.user))},dependencies:[E,He,Le,K,M,Ve,j,lt,oe,mt,T,dt,ut,ht]});let t=e;return t})();var Pt=t=>["/heroes/edit",t],Tt=t=>["/heroes",t];function Ot(t,e){if(t&1&&(o(0,"mat-chip"),a(1),r()),t&2){let l=e.$implicit;m(),g(" ",l," ")}}var bt=(()=>{let e=class e{ngOnInit(){if(!this.hero)throw Error("Hero property is required")}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C({type:e,selectors:[["heroes-hero-card"]],inputs:{hero:"hero"},decls:30,vars:19,consts:[["mat-card-image","",3,"src","alt"],[1,"mt-2"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"spacer"],["mat-raised-button","",3,"routerLink"]],template:function(n,s){n&1&&(o(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),a(3),r(),o(4,"mat-card-subtitle"),a(5),r()(),c(6,"img",0),I(7,"heroImage"),o(8,"mat-card-content",1)(9,"h4"),a(10),r(),o(11,"p")(12,"strong"),a(13,"Primera aparici\xF3n:"),r(),a(14),c(15,"br"),o(16,"mat-chip-listbox"),v(17,Ot,2,1,"mat-chip",2),I(18,"slice"),r()()(),c(19,"mat-divider"),o(20,"mat-card-actions")(21,"button",3)(22,"mat-icon"),a(23,"edit"),r(),a(24," Editar "),r(),c(25,"span",4),o(26,"button",5)(27,"mat-icon"),a(28,"more_horiz"),r(),a(29," M\xE1s "),r()()()),n&2&&(m(3),u(s.hero.superhero),m(2),u(s.hero.alter_ego),m(),p("src",x(7,9,s.hero),L)("alt",s.hero.superhero),m(4),u(s.hero.publisher),m(4),g(" ",s.hero.first_appearance," "),m(3),p("ngForOf",Fe(18,11,s.hero.characters.split(","),0,3)),m(4),p("routerLink",ue(15,Pt,s.hero.id)),m(5),p("routerLink",ue(17,Tt,s.hero.id)))},dependencies:[E,K,M,V,We,A,re,R,ie,te,Xe,Ye,j,T,Oe,$]});let t=e;return t})();function Nt(t,e){if(t&1&&(o(0,"div",2),c(1,"heroes-hero-card",3),r()),t&2){let l=e.$implicit;m(),p("hero",l)}}var It=(()=>{let e=class e{constructor(i){this.heroesService=i,this.heroes=[]}ngOnInit(){this.heroesSubscription=this.heroesService.getHeroes().subscribe(i=>this.heroes=i),this.heroes$=this.heroesService.getHeroes()}ngOnDestroy(){this.heroesSubscription?.unsubscribe()}};e.\u0275fac=function(n){return new(n||e)(d(O))},e.\u0275cmp=C({type:e,selectors:[["app-list-page"]],decls:5,vars:1,consts:[[1,"grid","mb-8","pt-2"],["class","col-12 sm:col-4 md:col-3 xl:col-2",4,"ngFor","ngForOf"],[1,"col-12","sm:col-4","md:col-3","xl:col-2"],[3,"hero"]],template:function(n,s){n&1&&(o(0,"h1"),a(1,"Listado de H\xE9roes"),r(),c(2,"mat-divider"),o(3,"div",0),v(4,Nt,2,1,"div",1),r()),n&2&&(m(4),p("ngForOf",s.heroes))},dependencies:[E,T,bt]});let t=e;return t})();var xt=(()=>{let e=class e{constructor(i,n){this.dialogRef=i,this.data=n}onNoClick(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}};e.\u0275fac=function(n){return new(n||e)(d(Ze),d(et))},e.\u0275cmp=C({type:e,selectors:[["app-confirm-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-button","",3,"click"],[1,"spacer"],["mat-button","","cdkFocusInitial","","color","primary",3,"click"]],template:function(n,s){n&1&&(o(0,"h2",0),a(1,"Atenci\xF3n"),r(),o(2,"mat-dialog-content")(3,"p"),a(4),r()(),o(5,"mat-dialog-actions")(6,"button",1),f("click",function(){return s.onNoClick()}),a(7," Cancelar "),r(),c(8,"span",2),o(9,"button",3),f("click",function(){return s.onConfirm()}),a(10," Aceptar "),r()()),n&2&&(m(4),g("\xBF Est\xE1 seguro de eliminar a ",s.data.superhero," ?"))},dependencies:[M,it,ot,rt]});let t=e;return t})();var se=function(t){return t.DCComics="DC Comics",t.MarvelComics="Marvel Comics",t}(se||{});function Rt(t,e){if(t&1&&(o(0,"small"),a(1),r()),t&2){let l=b();m(),u(l.currentHero.superhero)}}function $t(t,e){if(t&1&&(o(0,"mat-option",17),a(1),r()),t&2){let l=e.$implicit;p("value",l.value),m(),g(" ",l.value," ")}}function Ut(t,e){if(t&1){let l=k();o(0,"button",18),f("click",function(){_(l);let n=b();return S(n.onDeleteHero())}),o(1,"mat-icon"),a(2,"delete"),r(),a(3," Borrar "),r()}}var ve=(()=>{let e=class e{constructor(i,n,s,h,F){this.heroesService=i,this.activatedRoute=n,this.router=s,this.snackbar=h,this.dialog=F,this.heroForm=new Re({id:new y(""),superhero:new y("",{nonNullable:!0}),publisher:new y(se.DCComics),alter_ego:new y(""),first_appearance:new y(""),characters:new y(""),alt_img:new y("")}),this.publishers=se}ngOnInit(){this.router.url.includes("edit")&&this.activatedRoute.params.pipe(N(({id:i})=>this.heroesService.getHeroById(i))).subscribe(i=>{if(!i)return this.router.navigateByUrl("/");this.heroForm.reset(i)})}get currentHero(){return this.heroForm.value}onSubmit(){if(!this.heroForm.invalid){if(this.currentHero.id){this.heroesService.updateHero(this.currentHero).subscribe(i=>{this.showSnackBar(`${i.superhero} updated!`)});return}this.heroesService.addHero(this.currentHero).subscribe(i=>{this.router.navigate(["/heroes/edit",i.id]),this.showSnackBar(`${i.superhero} created!`)})}}onDeleteHero(){if(!this.currentHero.id)throw Error("Hero id is required");this.dialog.open(xt,{data:this.heroForm.value,disableClose:!0}).afterClosed().pipe(pe(n=>n),N(()=>this.heroesService.deleteHeroById(this.currentHero.id)),pe(n=>n)).subscribe(()=>{this.router.navigate(["/"]),this.showSnackBar(`${this.currentHero.superhero} deleted!`)})}showSnackBar(i){this.snackbar.open(i,"done",{duration:2500})}};e.\u0275fac=function(n){return new(n||e)(d(O),d(J),d(P),d(ft),d(tt))},e.\u0275cmp=C({type:e,selectors:[["app-new-page"]],decls:49,vars:13,consts:[[4,"ngIf"],[1,"mb-2"],[1,"grid"],[1,"col-12","sm:col-6"],[1,"grid",3,"ngSubmit","formGroup"],["matInput","","type","text","required","","formControlName","superhero"],["matInput","","type","text","required","","formControlName","alter_ego"],[1,"col-12"],["matInput","","type","text","required","","formControlName","first_appearance"],["matInput","","type","text","required","","formControlName","characters"],["required","","formControlName","publisher"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","alt_img"],[1,"flex","justify-content-between"],["mat-flat-button","","color","warn",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],["alt","Imagen del h\xE9roe","mat-card-image","",3,"src"],[3,"value"],["mat-flat-button","","color","warn",3,"click"]],template:function(n,s){n&1&&(o(0,"h1"),a(1),v(2,Rt,2,1,"small",0),r(),c(3,"mat-divider",1),o(4,"div",2)(5,"div",3)(6,"mat-card")(7,"mat-card-content")(8,"form",4),f("ngSubmit",function(){return s.onSubmit()}),o(9,"mat-form-field",3)(10,"mat-label"),a(11,"Super h\xE9roe"),r(),c(12,"input",5),r(),o(13,"mat-form-field",3)(14,"mat-label"),a(15,"Alter ego"),r(),c(16,"input",6),r(),o(17,"mat-form-field",7)(18,"mat-label"),a(19,"Primera aparici\xF3n"),r(),c(20,"input",8),r(),o(21,"mat-form-field",7)(22,"mat-label"),a(23,"Personajes"),r(),c(24,"input",9),r(),o(25,"mat-form-field",7)(26,"mat-label"),a(27,"Creador"),r(),o(28,"mat-select",10),v(29,$t,2,2,"mat-option",11),I(30,"keyvalue"),r()(),o(31,"mat-form-field",7)(32,"mat-label"),a(33,"Imagen Alternativa"),r(),c(34,"input",12),r()(),o(35,"div",13),v(36,Ut,4,0,"button",14),c(37,"span"),o(38,"button",15),f("click",function(){return s.onSubmit()}),o(39,"mat-icon"),a(40,"save"),r(),a(41," Guardar "),r()()()()(),o(42,"div",3)(43,"mat-card"),c(44,"img",16),I(45,"heroImage"),r()()(),o(46,"pre"),a(47),I(48,"json"),r()),n&2&&(m(),g(" ",s.currentHero.id?"Editar":"Agregar"," h\xE9roe "),m(),p("ngIf",s.currentHero.id),m(6),p("formGroup",s.heroForm),m(21),p("ngForOf",x(30,7,s.publishers)),m(7),p("ngIf",s.currentHero.id),m(8),p("src",x(45,9,s.currentHero),L),m(3),g("",x(48,11,s.currentHero),`
`))},dependencies:[E,B,Q,M,V,A,R,X,W,j,ee,T,ct,$e,Y,Z,Ae,ze,qe,Ge,z,Te,$]});let t=e;return t})();function qt(t,e){if(t&1&&(o(0,"mat-option",10),a(1),r()),t&2){let l=e.$implicit;p("value",l),m(),g(" ",l.superhero," ")}}function Gt(t,e){if(t&1&&(o(0,"mat-option",11),a(1),r()),t&2){let l=b();m(),g(" No se encontraron resultados con el t\xE9rmino ",l.searchInput.value," ")}}function zt(t,e){if(t&1&&(o(0,"mat-option",10),a(1),r()),t&2){let l=e.$implicit;p("value",l),m(),u(l.superhero)}}function Jt(t,e){if(t&1&&Ee(0,zt,2,2,"mat-option",10,ye),t&2){let l=b().ngIf;Me(l)}}function Kt(t,e){if(t&1&&(o(0,"mat-option",11),a(1),r()),t&2){let l=b(2);m(),g(" No se encontraron resultados con el t\xE9rmino ",l.myControl.value," ")}}function Qt(t,e){if(t&1&&(o(0,"div"),v(1,Jt,2,0)(2,Kt,2,1,"mat-option",6),r()),t&2){let l=e.ngIf,i=b();m(),xe(1,l.length>0?1:-1),m(),p("ngIf",l.length===0&&i.myControl.value&&i.myControl.value.length>0)}}var yt=(()=>{let e=class e{constructor(i,n){this.heroesService=i,this.router=n,this.searchInput=new y(""),this.heroes=[],this.deboucer=new Ce,this.myControl=new y("")}ngOnInit(){this.debouncerSubscription=this.deboucer.pipe(de(300)).subscribe(i=>this.heroesService.getSuggestions(i).subscribe(n=>this.heroes=n)),this.heroes$=this.myControl.valueChanges.pipe(de(300),N(i=>i?.length?this.heroesService.getSuggestions(i):[]))}ngOnDestroy(){this.debouncerSubscription?.unsubscribe()}searchHero(){let i=this.searchInput.value||"";if(!i){this.heroes=[],this.selectedHero=void 0;return}this.deboucer.next(i)}onSelectedOption(i){if(!i.option.value){this.selectedHero=void 0;return}let n=i.option.value;this.searchInput.setValue(n.superhero),this.selectedHero=n}onSelectedOptionObs(i){if(!i.option.value){this.selectedHeroObs=void 0;return}let n=i.option.value;this.myControl.setValue(n.superhero),this.selectedHeroObs=n}};e.\u0275fac=function(n){return new(n||e)(d(O),d(P))},e.\u0275cmp=C({type:e,selectors:[["app-search-page"]],decls:25,vars:15,consts:[["auto","matAutocomplete"],["autoObs","matAutocomplete"],[1,"flex","flex-column","p-2"],["type","text","matInput","",3,"input","formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[1,"example-full-width","mt-3"],["type","text","matInput","",3,"formControl","matAutocomplete"],[4,"ngIf"],[3,"value"],["value",""]],template:function(n,s){if(n&1){let h=k();o(0,"div",2)(1,"h3"),a(2,"Buscador"),r(),o(3,"mat-form-field")(4,"mat-label"),a(5,"Buscador de h\xE9roes"),r(),o(6,"input",3),f("input",function(){return _(h),S(s.searchHero())}),r(),o(7,"mat-autocomplete",4,0),f("optionSelected",function(D){return _(h),S(s.onSelectedOption(D))}),v(9,qt,2,2,"mat-option",5)(10,Gt,2,1,"mat-option",6),r()(),o(11,"mat-form-field",7)(12,"mat-label"),a(13,"Buscador de h\xE9roes (Observable)"),r(),c(14,"input",8),o(15,"mat-autocomplete",4,1),f("optionSelected",function(D){return _(h),S(s.onSelectedOptionObs(D))}),v(17,Qt,3,2,"div",9),I(18,"async"),r()()(),o(19,"pre"),a(20),I(21,"json"),r(),o(22,"pre"),a(23),I(24,"json"),r()}if(n&2){let h=H(8),F=H(16);m(6),p("formControl",s.searchInput)("matAutocomplete",h),m(3),p("ngForOf",s.heroes),m(),p("ngIf",s.heroes.length===0&&s.searchInput.value&&s.searchInput.value.length>0),m(4),p("formControl",s.myControl)("matAutocomplete",F),m(3),p("ngIf",x(18,9,s.heroes$)),m(3),g(`Normal:
`,x(21,11,s.selectedHero),`
`),m(3),g(`From Observable:
`,x(24,13,s.selectedHeroObs),"")}},dependencies:[E,B,Ke,Q,Qe,X,W,ee,Y,Z,Ue,Pe,z]});let t=e;return t})();var Wt=[{path:"",component:St,children:[{path:"new-hero",component:ve},{path:"search",component:yt},{path:"edit/:id",component:ve},{path:"list",component:It},{path:":id",component:Ct},{path:"**",redirectTo:"list"}]}],Et=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=G({type:e}),e.\u0275inj=q({imports:[fe.forChild(Wt),fe]});let t=e;return t})();var Xi=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=G({type:e}),e.\u0275inj=q({imports:[De,Et,gt,Je]});let t=e;return t})();export{Xi as HeroesModule};
